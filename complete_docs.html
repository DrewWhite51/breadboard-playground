<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced LED Project Guide</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.8em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        h2 {
            color: #34495e;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-top: 50px;
        }
        h3 {
            color: #e74c3c;
            margin-top: 30px;
        }
        .formula-box {
            background: #e3f2fd;
            border: 3px solid #2196F3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: center;
        }
        .formula {
            font-size: 24px;
            font-weight: bold;
            color: #1976d2;
            margin: 10px 0;
        }
        .example-box {
            background: #f3e5f5;
            border: 2px solid #9c27b0;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .warning-box {
            background: #fff3e0;
            border: 2px solid #ff9800;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .success-box {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .info-box {
            background: #e1f5fe;
            border: 2px solid #00bcd4;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .calc-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .calc-table th,
        .calc-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        .calc-table th {
            background: #4CAF50;
            color: white;
        }
        .calc-table tr:nth-child(even) {
            background: #f2f2f2;
        }
        .step {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 15px;
            margin: 15px 0;
        }
        .circuit-diagram {
            width: 100%;
            max-width: 800px;
            height: 400px;
            border: 2px solid #333;
            margin: 20px auto;
            display: block;
            background: white;
        }
        .breadboard-layout {
            background: #f0f0f0;
            border: 3px solid #333;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        .toc {
            background: #f1f3f4;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            columns: 2;
            column-gap: 30px;
        }
        .toc ul {
            list-style: none;
            padding-left: 0;
            break-inside: avoid;
        }
        .toc li {
            margin: 8px 0;
        }
        .toc a {
            color: #007bff;
            text-decoration: none;
            font-weight: 500;
        }
        .toc a:hover {
            text-decoration: underline;
        }
        .code {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 15px 0;
        }
        .calculator {
            background: #fff;
            border: 2px solid #007bff;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .input-group {
            margin: 10px 0;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
        }
        .input-group label {
            width: 200px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .input-group input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 100px;
        }
        .calculate-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 0;
        }
        .result {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
        .multi-led-example {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .led-config {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🚀 Advanced LED Project Guide</h1>
        <p style="text-align: center; font-size: 1.2em; color: #666;">From 5 LEDs to Complex Matrices: Scaling Your Projects</p>
        
        <div class="toc">
            <h3>📑 Table of Contents</h3>
            <ul>
                <li><a href="#resistance-calculations">Resistance Calculations</a></li>
                <li><a href="#multiple-leds">Multiple LEDs & Current</a></li>
                <li><a href="#breadboard-layouts">Advanced Breadboard Layouts</a></li>
                <li><a href="#led-matrices">LED Matrices & Multiplexing</a></li>
                <li><a href="#power-management">Power Management</a></li>
                <li><a href="#troubleshooting">Advanced Troubleshooting</a></li>
                <li><a href="#project-ideas">Project Expansion Ideas</a></li>
            </ul>
        </div>

        <section id="resistance-calculations">
            <h2>🔧 Advanced Resistance Calculations</h2>
            
            <div class="formula-box">
                <h3>⚡ Ohm's Law for LEDs</h3>
                <div class="formula">R = (V_supply - V_led) ÷ I_led</div>
                <p><strong>Where:</strong></p>
                <ul style="text-align: left; display: inline-block;">
                    <li><strong>R</strong> = Resistance needed (Ohms)</li>
                    <li><strong>V_supply</strong> = Voltage from GPIO pin (3.3V)</li>
                    <li><strong>V_led</strong> = LED forward voltage drop</li>
                    <li><strong>I_led</strong> = LED current (typically 10-20mA)</li>
                </ul>
            </div>

            <h3>LED Forward Voltage by Color</h3>
            <table class="calc-table">
                <thead>
                    <tr>
                        <th>LED Color</th>
                        <th>Forward Voltage (V_led)</th>
                        <th>Calculated Resistor</th>
                        <th>Recommended Resistor</th>
                        <th>Brightness</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Red</td>
                        <td>1.8 - 2.2V</td>
                        <td>55 - 75Ω</td>
                        <td>100Ω - 220Ω</td>
                        <td>Good with 220Ω</td>
                    </tr>
                    <tr>
                        <td>Yellow</td>
                        <td>2.0 - 2.2V</td>
                        <td>55 - 65Ω</td>
                        <td>100Ω - 220Ω</td>
                        <td>Good with 220Ω</td>
                    </tr>
                    <tr>
                        <td>Green</td>
                        <td>2.0 - 2.2V</td>
                        <td>55 - 65Ω</td>
                        <td>100Ω - 220Ω</td>
                        <td>Good with 220Ω</td>
                    </tr>
                    <tr>
                        <td>Blue</td>
                        <td>3.0 - 3.4V</td>
                        <td>0 - 15Ω</td>
                        <td>47Ω - 100Ω</td>
                        <td>Dim with 220Ω</td>
                    </tr>
                    <tr>
                        <td>White</td>
                        <td>3.0 - 3.4V</td>
                        <td>0 - 15Ω</td>
                        <td>47Ω - 100Ω</td>
                        <td>Dim with 220Ω</td>
                    </tr>
                    <tr>
                        <td>UV/Purple</td>
                        <td>3.2 - 3.6V</td>
                        <td>0 - 5Ω</td>
                        <td>47Ω - 68Ω</td>
                        <td>Very dim with 220Ω</td>
                    </tr>
                </tbody>
            </table>

            <div class="calculator">
                <h3>🔢 Multi-LED Resistance Calculator</h3>
                <div class="input-group">
                    <label>Supply Voltage (V):</label>
                    <input type="number" id="supply-voltage" value="3.3" step="0.1">
                </div>
                <div class="input-group">
                    <label>LED Forward Voltage (V):</label>
                    <input type="number" id="led-voltage" value="2.0" step="0.1">
                </div>
                <div class="input-group">
                    <label>Desired Current per LED (mA):</label>
                    <input type="number" id="led-current" value="15" step="1">
                </div>
                <div class="input-group">
                    <label>Number of LEDs:</label>
                    <input type="number" id="num-leds" value="1" step="1" min="1">
                </div>
                <button class="calculate-btn" onclick="calculateAdvancedResistor()">Calculate Resistor</button>
                <div id="advanced-result" class="result" style="display: none;"></div>
            </div>

            <div class="warning-box">
                <h3>⚠️ Key Considerations</h3>
                <ul>
                    <li><strong>GPIO Current Limit:</strong> Each pin can safely provide ~16mA</li>
                    <li><strong>Total Pi Current:</strong> Don't exceed 50mA total from all GPIO pins</li>
                    <li><strong>Voltage Tolerance:</strong> LED forward voltages vary ±0.2V between units</li>
                    <li><strong>Temperature Effects:</strong> Forward voltage decreases as LEDs heat up</li>
                </ul>
            </div>
        </section>

        <section id="multiple-leds">
            <h2>💡 Multiple LEDs & Current Management</h2>

            <h3>Current Calculation for Multiple LEDs</h3>
            <div class="formula-box">
                <div class="formula">Total Current = Number of LEDs × Current per LED</div>
                <p>Example: 5 LEDs × 15mA each = 75mA total</p>
            </div>

            <div class="multi-led-example">
                <div class="led-config">
                    <h4>Individual Resistors (Recommended)</h4>
                    <p><strong>Configuration:</strong> Each LED has its own resistor</p>
                    <p><strong>Pros:</strong></p>
                    <ul style="text-align: left;">
                        <li>Even brightness across all LEDs</li>
                        <li>Independent control</li>
                        <li>Easier troubleshooting</li>
                    </ul>
                    <p><strong>Current:</strong> Predictable, I_total = n × I_led</p>
                </div>
                
                <div class="led-config">
                    <h4>Shared Resistors (Advanced)</h4>
                    <p><strong>Configuration:</strong> Multiple LEDs share one resistor</p>
                    <p><strong>Cons:</strong></p>
                    <ul style="text-align: left;">
                        <li>Uneven brightness</li>
                        <li>Complex calculations</li>
                        <li>One LED failure affects others</li>
                    </ul>
                    <p><strong>Current:</strong> Complex, depends on LED matching</p>
                </div>
            </div>

            <h3>GPIO Pin Current Limits</h3>
            <table class="calc-table">
                <thead>
                    <tr>
                        <th>Scenario</th>
                        <th>Current per Pin</th>
                        <th>Total GPIO Current</th>
                        <th>Safe LED Count</th>
                        <th>Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Conservative</td>
                        <td>10mA</td>
                        <td>50mA max</td>
                        <td>5 LEDs</td>
                        <td>Very safe, good for 24/7 operation</td>
                    </tr>
                    <tr>
                        <td>Standard</td>
                        <td>15mA</td>
                        <td>75mA max</td>
                        <td>5 LEDs</td>
                        <td>Good balance of brightness/safety</td>
                    </tr>
                    <tr>
                        <td>Maximum</td>
                        <td>16mA</td>
                        <td>80mA max</td>
                        <td>5 LEDs</td>
                        <td>Near GPIO limits, monitor temperature</td>
                    </tr>
                    <tr>
                        <td>Overload</td>
                        <td>20mA+</td>
                        <td>100mA+</td>
                        <td>5+ LEDs</td>
                        <td>⚠️ Risk of GPIO damage</td>
                    </tr>
                </tbody>
            </table>

            <div class="example-box">
                <h3>🧮 Real-World Example: 8 White LEDs</h3>
                <div class="step">
                    <p><strong>Challenge:</strong> You want 8 white LEDs, but GPIO pins are limited</p>
                    <p><strong>Problem:</strong> 8 LEDs × 15mA = 120mA (exceeds 50mA safe limit)</p>
                </div>
                
                <div class="step">
                    <p><strong>Solution 1:</strong> Reduce current per LED</p>
                    <p>8 LEDs × 6mA = 48mA (safe, but dimmer)</p>
                    <p>Use larger resistors: 470Ω instead of 100Ω</p>
                </div>
                
                <div class="step">
                    <p><strong>Solution 2:</strong> Use transistor drivers</p>
                    <p>GPIO pins control transistors, external power drives LEDs</p>
                    <p>Allows full 20mA per LED safely</p>
                </div>
                
                <div class="step">
                    <p><strong>Solution 3:</strong> LED multiplexing</p>
                    <p>Only light some LEDs at a time, cycle rapidly</p>
                    <p>Creates illusion all LEDs are on</p>
                </div>
            </div>
        </section>

        <section id="breadboard-layouts">
            <h2>🍞 Advanced Breadboard Layouts</h2>

            <h3>Multiple LEDs on Same Row</h3>
            <div class="warning-box">
                <p><strong>❌ Don't put multiple LEDs on the same breadboard row!</strong></p>
                <p>Breadboard rows are internally connected - this would connect LED anodes together, causing uneven brightness and potential damage.</p>
            </div>

            <div class="success-box">
                <h3>✅ Correct Multi-LED Layouts</h3>
                <p><strong>Option 1: Separate Rows (Recommended)</strong></p>
                <ul>
                    <li>Each LED gets its own row (5, 7, 9, 11, 13, etc.)</li>
                    <li>Each LED gets its own resistor</li>
                    <li>All cathodes connect to common ground rail</li>
                </ul>
                
                <p><strong>Option 2: Use Both Sides of Gap</strong></p>
                <ul>
                    <li>Put some LEDs on left side (columns a-e)</li>
                    <li>Put others on right side (columns f-j)</li>
                    <li>Use the center gap as natural separation</li>
                </ul>
            </div>

            <h3>Ground Connection Strategies</h3>
            <div class="breadboard-layout">
                <h4>Method 1: Ground Rail Distribution</h4>
                <p>✅ <strong>Best for beginners:</strong> Connect all LED cathodes to ground rail</p>
                <div class="code">
LED 1 cathode (Row 5, Col f) → Ground rail
LED 2 cathode (Row 7, Col f) → Ground rail  
LED 3 cathode (Row 9, Col f) → Ground rail
...
Ground rail → Pi GND pin
                </div>
            </div>

            <div class="breadboard-layout">
                <h4>Method 2: Daisy Chain Grounds</h4>
                <p>✅ <strong>Saves wires:</strong> Chain LED grounds together</p>
                <div class="code">
LED 1 cathode → LED 2 cathode → LED 3 cathode → ... → Pi GND
                </div>
            </div>

            <div class="breadboard-layout">
                <h4>Method 3: Bus Wire</h4>
                <p>✅ <strong>Professional look:</strong> Use solid wire as ground bus</p>
                <div class="code">
Run solid wire along breadboard edge
Connect each LED cathode to bus with short jumpers
Connect bus to Pi GND
                </div>
            </div>

            <h3>Large Project Layouts (10+ LEDs)</h3>
            <table class="calc-table">
                <thead>
                    <tr>
                        <th>LED Count</th>
                        <th>Breadboard Strategy</th>
                        <th>Power Strategy</th>
                        <th>Control Strategy</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1-5 LEDs</td>
                        <td>Single breadboard, separate rows</td>
                        <td>GPIO direct drive</td>
                        <td>Individual GPIO pins</td>
                    </tr>
                    <tr>
                        <td>6-10 LEDs</td>
                        <td>Single large breadboard or two small</td>
                        <td>GPIO + external 5V for high current</td>
                        <td>GPIO + transistor drivers</td>
                    </tr>
                    <tr>
                        <td>11-20 LEDs</td>
                        <td>Multiple breadboards</td>
                        <td>External 5V/12V power supply</td>
                        <td>Shift registers (74HC595)</td>
                    </tr>
                    <tr>
                        <td>20+ LEDs</td>
                        <td>Custom PCB or LED matrices</td>
                        <td>Dedicated LED driver ICs</td>
                        <td>Multiplexing or I2C drivers</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="led-matrices">
            <h2>🔲 LED Matrices & Multiplexing</h2>

            <h3>From Linear to Matrix</h3>
            <div class="info-box">
                <p><strong>Linear (your current setup):</strong> 5 LEDs in a row</p>
                <p><strong>Matrix:</strong> LEDs arranged in rows and columns (3×3, 4×4, 8×8)</p>
                <p><strong>Advantage:</strong> Control more LEDs with fewer pins</p>
            </div>

            <h3>Matrix Wiring Strategies</h3>
            <div class="example-box">
                <h4>Individual Control (Current Method)</h4>
                <p><strong>3×3 Matrix:</strong> 9 LEDs = 9 GPIO pins + 1 ground</p>
                <p><strong>Pros:</strong> Simple, each LED independent</p>
                <p><strong>Cons:</strong> Uses many GPIO pins</p>
                
                <h4>Row/Column Multiplexing</h4>
                <p><strong>3×3 Matrix:</strong> 9 LEDs = 3 row pins + 3 column pins</p>
                <p><strong>Pros:</strong> Saves GPIO pins</p>
                <p><strong>Cons:</strong> Complex programming, can't light all simultaneously</p>
                
                <h4>Shift Register Control</h4>
                <p><strong>Any size:</strong> Unlimited LEDs = 3 GPIO pins + shift registers</p>
                <p><strong>Pros:</strong> Minimal GPIO usage, easy expansion</p>
                <p><strong>Cons:</strong> Requires additional ICs</p>
            </div>

            <h3>Multiplexing Example: 3×3 Matrix</h3>
            <svg class="circuit-diagram" viewBox="0 0 800 400">
                <!-- Row lines -->
                <line x1="100" y1="100" x2="400" y2="100" stroke="#ff0000" stroke-width="3"/>
                <line x1="100" y1="200" x2="400" y2="200" stroke="#ff0000" stroke-width="3"/>
                <line x1="100" y1="300" x2="400" y2="300" stroke="#ff0000" stroke-width="3"/>
                
                <!-- Column lines -->
                <line x1="200" y1="50" x2="200" y2="350" stroke="#0000ff" stroke-width="3"/>
                <line x1="300" y1="50" x2="300" y2="350" stroke="#0000ff" stroke-width="3"/>
                <line x1="400" y1="50" x2="400" y2="350" stroke="#0000ff" stroke-width="3"/>
                
                <!-- LEDs at intersections -->
                <circle cx="200" cy="100" r="15" fill="#ffff00" stroke="#333" stroke-width="2"/>
                <circle cx="300" cy="100" r="15" fill="#ffff00" stroke="#333" stroke-width="2"/>
                <circle cx="400" cy="100" r="15" fill="#ffff00" stroke="#333" stroke-width="2"/>
                <circle cx="200" cy="200" r="15" fill="#ffff00" stroke="#333" stroke-width="2"/>
                <circle cx="300" cy="200" r="15" fill="#ffff00" stroke="#333" stroke-width="2"/>
                <circle cx="400" cy="200" r="15" fill="#ffff00" stroke="#333" stroke-width="2"/>
                <circle cx="200" cy="300" r="15" fill="#ffff00" stroke="#333" stroke-width="2"/>
                <circle cx="300" cy="300" r="15" fill="#ffff00" stroke="#333" stroke-width="2"/>
                <circle cx="400" cy="300" r="15" fill="#ffff00" stroke="#333" stroke-width="2"/>
                
                <!-- Labels -->
                <text x="50" y="105" font-size="14" font-weight="bold">Row 1</text>
                <text x="50" y="205" font-size="14" font-weight="bold">Row 2</text>
                <text x="50" y="305" font-size="14" font-weight="bold">Row 3</text>
                <text x="190" y="30" font-size="14" font-weight="bold">Col 1</text>
                <text x="290" y="30" font-size="14" font-weight="bold">Col 2</text>
                <text x="390" y="30" font-size="14" font-weight="bold">Col 3</text>
                
                <!-- GPIO connections -->
                <text x="500" y="105" font-size="12">GPIO 18 → Row 1</text>
                <text x="500" y="205" font-size="12">GPIO 19 → Row 2</text>
                <text x="500" y="305" font-size="12">GPIO 20 → Row 3</text>
                <text x="500" y="150" font-size="12">GPIO 21 → Col 1</text>
                <text x="500" y="170" font-size="12">GPIO 22 → Col 2</text>
                <text x="500" y="190" font-size="12">GPIO 23 → Col 3</text>
            </svg>

            <div class="code">
# Multiplexed matrix control example
def light_led(row, col):
    # Turn off all rows and columns first
    clear_matrix()
    
    # Turn on specific row (high)
    GPIO.output(row_pins[row], GPIO.HIGH)
    
    # Turn on specific column (low, sinking current)
    GPIO.output(col_pins[col], GPIO.LOW)
    
    # LED at intersection lights up!
            </div>
        </section>

        <section id="power-management">
            <h2>⚡ Power Management & External Supplies</h2>

            <h3>When You Need External Power</h3>
            <div class="warning-box">
                <p><strong>You need external power when:</strong></p>
                <ul>
                    <li>Total LED current > 50mA</li>
                    <li>Using high-power LEDs (1W, 3W, etc.)</li>
                    <li>More than 8-10 standard LEDs</li>
                    <li>LEDs need different voltage (5V, 12V)</li>
                </ul>
            </div>

            <h3>External Power Options</h3>
            <table class="calc-table">
                <thead>
                    <tr>
                        <th>Power Source</th>
                        <th>Voltage</th>
                        <th>Current Capacity</th>
                        <th>Best For</th>
                        <th>Connection Method</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Pi 5V Pin</td>
                        <td>5V</td>
                        <td>~500mA</td>
                        <td>10-20 LEDs</td>
                        <td>Direct connection with resistors</td>
                    </tr>
                    <tr>
                        <td>USB Power Bank</td>
                        <td>5V</td>
                        <td>1-3A</td>
                        <td>20-100 LEDs</td>
                        <td>Transistor drivers, common ground</td>
                    </tr>
                    <tr>
                        <td>Wall Adapter</td>
                        <td>5V, 12V, 24V</td>
                        <td>1-10A+</td>
                        <td>Large matrices, LED strips</td>
                        <td>Isolated drivers, optocouplers</td>
                    </tr>
                    <tr>
                        <td>Bench PSU</td>
                        <td>Variable</td>
                        <td>Variable</td>
                        <td>Testing, development</td>
                        <td>Adjustable, current limiting</td>
                    </tr>
                </tbody>
            </table>

            <h3>Safe External Power Connection</h3>
            <div class="example-box">
                <h4>Method 1: Common Ground with Transistors</h4>
                <div class="code">
Pi GND ← → External Supply GND (common ground)
Pi GPIO → Transistor Base → Transistor controls LED
External 5V → LED → Resistor → Transistor Collector
                </div>
                
                <h4>Method 2: Isolated with Optocouplers</h4>
                <div class="code">
Pi GPIO → Optocoupler LED
Optocoupler Transistor → Controls external circuit
No electrical connection between Pi and external power
                </div>
            </div>

            <div class="success-box">
                <h3>✅ Power Calculation Example</h3>
                <p><strong>Project:</strong> 16 white LEDs for room lighting</p>
                <p><strong>Calculation:</strong></p>
                <ul>
                    <li>16 LEDs × 20mA = 320mA total</li>
                    <li>At 5V: 5V × 0.32A = 1.6W total power</li>
                    <li>Resistor losses: ~0.5W additional</li>
                    <li><strong>Required supply:</strong> 5V, 500mA minimum</li>
                </ul>
            </div>
        </section>

        <section id="troubleshooting">
            <h2>🔧 Advanced Troubleshooting</h2>

            <h3>Common Issues with Multiple LEDs</h3>
            <div class="warning-box">
                <h4>Problem: Some LEDs dimmer than others</h4>
                <p><strong>Causes:</strong></p>
                <ul>
                    <li>Different resistor values</li>
                    <li>LED forward voltage variations</li>
                    <li>Voltage drop in long wires</li>
                    <li>Shared resistors or poor connections</li>
                </ul>
                <p><strong>Solutions:</strong></p>
                <ul>
                    <li>Use identical resistors for each LED</li>
                    <li>Sort LEDs by forward voltage</li>
                    <li>Use thicker wires or shorter runs</li>
                    <li>Individual resistors for each LED</li>
                </ul>
            </div>

            <div class="warning-box">
                <h4>Problem: Pi resets or crashes with many LEDs</h4>
                <p><strong>Causes:</strong></p>
                <ul>
                    <li>Exceeding GPIO current limits</li>
                    <li>Power supply insufficient</li>
                    <li>Inrush current on LED activation</li>
                </ul>
                <p><strong>Solutions:</strong></p>
                <ul>
                    <li>Reduce LED current (larger resistors)</li>
                    <li>Use external power for LEDs</li>
                    <li>Add capacitors for power filtering</li>
                    <li>Gradual LED activation (not all at once)</li>
                </ul>
            </div>

            <h3>Measurement and Testing Tools</h3>
            <table class="calc-table">
                <thead>
                    <tr>
                        <th>Tool</th>
                        <th>What to Measure</th>
                        <th>Normal Values</th>
                        <th>Problem Indicators</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Multimeter (Voltage)</td>
                        <td>GPIO pin voltage</td>
                        <td>3.3V when HIGH</td>
                        <td>&lt;3.0V indicates overload</td>
                    </tr>
                    <tr>
                        <td>Multimeter (Current)</td>
                        <td>LED current</td>
                        <td>10-20mA per LED</td>
                        <td>&gt;25mA may damage GPIO</td>
                    </tr>
                    <tr>
                        <td>Multimeter (Resistance)</td>
                        <td>Resistor values</td>
                        <td>±5% of rated value</td>
                        <td>Open circuit or wrong value</td>
                    </tr>
                    <tr>
                        <td>Oscilloscope</td>
                        <td>PWM signals, noise</td>
                        <td>Clean square waves</td>
                        <td>Ringing, overshoot, noise</td>
                    </tr>
                </tbody>
            </table>

            <h3>Systematic Debug Process</h3>
            <div class="step">
                <h4>Step 1: Power Check</h4>
                <div class="code">
# Measure Pi supply voltage
gpio readall  # Check if Pi is stable
vcgencmd measure_volts core  # Check core voltage
                </div>
            </div>

            <div class="step">
                <h4>Step 2: Individual LED Test</h4>
                <div class="code">
# Test each LED individually
LED> on 1  # Should be ~15mA current
LED> off 1
LED> on 2  # Compare brightness
# Continue for all LEDs
                </div>
            </div>

            <div class="step">
                <h4>Step 3: Current Measurement</h4>
                <div class="code">
# Measure current with multimeter in series
# Between GPIO pin and resistor
# Normal: 10-20mA per LED
# Problem: >25mA or <5mA
                </div>
            </div>

            <div class="step">
                <h4>Step 4: Temperature Check</h4>
                <div class="code">
vcgencmd measure_temp  # Pi temperature
# Normal: <60°C
# Problem: >70°C indicates overload
                </div>
            </div>
        </section>

        <section id="project-ideas">
            <h2>🎯 Project Expansion Ideas</h2>

            <h3>From 5 LEDs to Advanced Projects</h3>
            
            <div class="multi-led-example">
                <div class="led-config">
                    <h4>🌈 RGB Color Mixing</h4>
                    <p><strong>Components:</strong> RGB LEDs, PWM control</p>
                    <p><strong>Skills:</strong> Color theory, PWM programming</p>
                    <p><strong>Outcome:</strong> Mix any color from red, green, blue</p>
                    <div class="code">
# Example: Purple color
red_pwm.ChangeDutyCycle(50)    # 50% red
green_pwm.ChangeDutyCycle(0)   # 0% green  
blue_pwm.ChangeDutyCycle(50)   # 50% blue
                    </div>
                </div>

                <div class="led-config">
                    <h4>📊 VU Meter</h4>
                    <p><strong>Components:</strong> Microphone, 10 LEDs</p>
                    <p><strong>Skills:</strong> Audio processing, real-time control</p>
                    <p><strong>Outcome:</strong> LEDs respond to music volume</p>
                    <div class="code">
# Audio level → LED count
volume = get_audio_level()
leds_on = int(volume * 10)  # Scale to 10 LEDs
light_leds(range(1, leds_on + 1))
                    </div>
                </div>

                <div class="led-config">
                    <h4>🕐 Binary Clock</h4>
                    <p><strong>Components:</strong> 6-12 LEDs</p>
                    <p><strong>Skills:</strong> Binary math, time handling</p>
                    <p><strong>Outcome:</strong> Display time in binary format</p>
                    <div class="code">
# Hour in binary (4 LEDs)
hour = datetime.now().hour
for i in range(4):
    bit = (hour >> i) & 1
    set_led(i+1, bit)
                    </div>
                </div>

                <div class="led-config">
                    <h4>🎮 LED Game</h4>
                    <p><strong>Components:</strong> LEDs, buttons, speaker</p>
                    <p><strong>Skills:</strong> Game logic, user interaction</p>
                    <p><strong>Outcome:</strong> Simon Says, reaction games</p>
                    <div class="code">
# Simon Says sequence
sequence = [1, 3, 2, 5, 1]
for led in sequence:
    blink_led(led)
    time.sleep(0.5)
                    </div>
                </div>

                <div class="led-config">
                    <h4>📡 IoT Status Display</h4>
                    <p><strong>Components:</strong> WiFi, web APIs</p>
                    <p><strong>Skills:</strong> Network programming, APIs</p>
                    <p><strong>Outcome:</strong> Show weather, stocks, notifications</p>
                    <div class="code">
# Weather indicator
temp = get_weather_temp()
if temp > 25:
    pattern("hot")  # Red LEDs
elif temp < 10:
    pattern("cold") # Blue LEDs
                    </div>
                </div>

                <div class="led-config">
                    <h4>🏠 Home Automation</h4>
                    <p><strong>Components:</strong> Sensors, relays, LEDs</p>
                    <p><strong>Skills:</strong> Automation logic, scheduling</p>
                    <p><strong>Outcome:</strong> Smart lighting, security system</p>
                    <div class="code">
# Motion-activated lighting
if motion_sensor.is_active:
    pattern("security_alert")
    send_notification("Motion detected")
                    </div>
                </div>
            </div>

            <h3>Scaling Up Hardware</h3>
            <table class="calc-table">
                <thead>
                    <tr>
                        <th>Project Size</th>
                        <th>LED Count</th>
                        <th>Control Method</th>
                        <th>Power Requirements</th>
                        <th>Complexity</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Beginner</td>
                        <td>1-5 LEDs</td>
                        <td>Direct GPIO</td>
                        <td>Pi power only</td>
                        <td>Low</td>
                    </tr>
                    <tr>
                        <td>Intermediate</td>
                        <td>6-20 LEDs</td>
                        <td>Shift registers, transistors</td>
                        <td>External 5V supply</td>
                        <td>Medium</td>
                    </tr>
                    <tr>
                        <td>Advanced</td>
                        <td>21-100 LEDs</td>
                        <td>LED driver ICs, multiplexing</td>
                        <td>Dedicated power supply</td>
                        <td>High</td>
                    </tr>
                    <tr>
                        <td>Professional</td>
                        <td>100+ LEDs</td>
                        <td>Custom PCB, FPGA</td>
                        <td>High-current supplies</td>
                        <td>Expert</td>
                    </tr>
                </tbody>
            </table>

            <h3>Learning Path Recommendations</h3>
            <div class="info-box">
                <h4>📚 Next Steps for Learning</h4>
                <ol>
                    <li><strong>Master your 5 LED setup</strong> - Get comfortable with all CLI commands</li>
                    <li><strong>Add PWM brightness control</strong> - Learn GPIO.PWM() for dimming</li>
                    <li><strong>Try different colors</strong> - Experiment with RGB LEDs</li>
                    <li><strong>Add sensors</strong> - Motion, light, temperature sensors</li>
                    <li><strong>Learn multiplexing</strong> - Control more LEDs with fewer pins</li>
                    <li><strong>External power</strong> - Safely use higher voltages and currents</li>
                    <li><strong>Communication protocols</strong> - SPI, I2C for LED drivers</li>
                    <li><strong>PCB design</strong> - Create custom LED boards</li>
                </ol>
            </div>

            <h3>Component Upgrade Path</h3>
            <div class="example-box">
                <h4>🛒 Shopping List for Next Level</h4>
                <p><strong>For 10+ LEDs:</strong></p>
                <ul>
                    <li>74HC595 shift registers (3-4 units)</li>
                    <li>2N2222 transistors (10 pack)</li>
                    <li>5V 2A power supply</li>
                    <li>Large breadboards or perfboard</li>
                    <li>Assorted resistors (47Ω-470Ω)</li>
                </ul>
                
                <p><strong>For RGB projects:</strong></p>
                <ul>
                    <li>RGB LEDs (common cathode preferred)</li>
                    <li>WS2812B LED strips (NeoPixels)</li>
                    <li>Level shifters (3.3V to 5V)</li>
                    <li>Capacitors for power filtering</li>
                </ul>
                
                <p><strong>For measurement:</strong></p>
                <ul>
                    <li>Digital multimeter</li>
                    <li>Bench power supply (optional)</li>
                    <li>Oscilloscope (for advanced debugging)</li>
                    <li>Current probe or shunt resistors</li>
                </ul>
            </div>
        </section>

        <section id="safety">
            <h2>⚠️ Safety & Best Practices</h2>

            <div class="warning-box">
                <h3>🚨 Critical Safety Rules</h3>
                <ul>
                    <li><strong>Never exceed GPIO limits:</strong> 16mA per pin, 50mA total</li>
                    <li><strong>Always use resistors:</strong> Even "safe" voltages can damage LEDs</li>
                    <li><strong>Check polarity:</strong> LEDs and power supplies have correct orientation</li>
                    <li><strong>Power off before wiring:</strong> Make connections with power disconnected</li>
                    <li><strong>Monitor temperature:</strong> Hot components indicate problems</li>
                </ul>
            </div>

            <div class="success-box">
                <h3>✅ Professional Practices</h3>
                <ul>
                    <li><strong>Document your circuits:</strong> Draw schematics, take photos</li>
                    <li><strong>Use proper wire management:</strong> Neat wiring prevents mistakes</li>
                    <li><strong>Test incrementally:</strong> Add one LED at a time</li>
                    <li><strong>Measure before assuming:</strong> Use multimeter to verify</li>
                    <li><strong>Keep spares:</strong> LEDs and resistors are consumable</li>
                </ul>
            </div>

            <h3>Emergency Procedures</h3>
            <div class="warning-box">
                <p><strong>If you see/smell:</strong></p>
                <ul>
                    <li><strong>Smoke:</strong> Immediately disconnect power</li>
                    <li><strong>Very hot components:</strong> Power off, check current</li>
                    <li><strong>Dim/flickering LEDs:</strong> Check power supply capacity</li>
                    <li><strong>Pi instability:</strong> Reduce LED current or add external power</li>
                </ul>
            </div>
        </section>

        <footer style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 2px solid #dee2e6;">
            <p><strong>Advanced LED Project Guide</strong> - Scale from 5 LEDs to amazing light displays!</p>
            <p>Remember: Start simple, test thoroughly, and always prioritize safety! 🚀✨</p>
        </footer>
    </div>

    <script>
        function calculateAdvancedResistor() {
            const supplyVoltage = parseFloat(document.getElementById('supply-voltage').value);
            const ledVoltage = parseFloat(document.getElementById('led-voltage').value);
            const ledCurrent = parseFloat(document.getElementById('led-current').value) / 1000; // Convert mA to A
            const numLeds = parseInt(document.getElementById('num-leds').value);
            
            const voltageAcrossResistor = supplyVoltage - ledVoltage;
            const resistance = voltageAcrossResistor / ledCurrent;
            const totalCurrent = ledCurrent * numLeds * 1000; // Convert back to mA
            const powerPerResistor = voltageAcrossResistor * ledCurrent;
            
            let recommendation = '';
            let warning = '';
            
            if (resistance < 10) {
                recommendation = 'Use 47Ω resistor (minimum safe value)';
                warning = '⚠️ Very low resistance - check LED forward voltage';
            } else if (resistance < 50) {
                recommendation = 'Use 47Ω or 68Ω resistor';
            } else if (resistance < 100) {
                recommendation = 'Use 100Ω resistor';
            } else if (resistance < 200) {
                recommendation = 'Use 220Ω resistor';
            } else {
                recommendation = 'Use 330Ω or 470Ω resistor';
            }
            
            if (totalCurrent > 50) {
                warning += '<br>⚠️ Total current exceeds 50mA - consider external power';
            }
            
            if (powerPerResistor > 0.25) {
                warning += '<br>⚠️ Use 0.5W or higher rated resistors';
            }
            
            const resultDiv = document.getElementById('advanced-result');
            resultDiv.innerHTML = `
                <strong>Results for ${numLeds} LED(s):</strong><br>
                Voltage across each resistor: ${voltageAcrossResistor.toFixed(2)}V<br>
                Calculated resistance: ${resistance.toFixed(1)}Ω<br>
                Current per LED: ${(ledCurrent * 1000).toFixed(1)}mA<br>
                Total current: ${totalCurrent.toFixed(1)}mA<br>
                Power per resistor: ${(powerPerResistor * 1000).toFixed(1)}mW<br>
                <strong>Recommendation:</strong> ${recommendation}<br>
                ${warning}
            `;
            resultDiv.style.display = 'block';
        }
    </script>
</body>
</html>